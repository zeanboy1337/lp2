<?php
// Tampilkan error untuk debug
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);

// Pakai Composer atau manual
require_once __DIR__ . '/phpseclib3/Net/SFTP.php';

use phpseclib3\Net\SFTP;

$host = '62.146.225.40';
$port = 22;
$username = 'adminptyogov';
$password = 'psacln';

// Path file lokal
$localFile = __DIR__ . '/localfile.txt'; // pastikan path benar

// Cek file lokal dulu
if (!file_exists($localFile)) {
    die('Local file tidak ditemukan: ' . $localFile);
}

// Path remote harus sesuai dengan home user
$remoteFile = '/home/adminptyogov/remote_uploaded_file.txt';

$sftp = new SFTP($host, $port);

if (!$sftp->login($username, $password)) {
    die('Login failed - cek user/password.');
}

if (!$sftp->put($remoteFile, file_get_contents($localFile))) {
    die('Upload failed - periksa permission.');
}

echo "âœ… Upload berhasil ke SFTP!";
?>
